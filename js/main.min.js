var flakes=[],canvas=document.getElementById("canvas"),regio=document.getElementById("regio"),innerTop=document.getElementById("innerTop"),innerBottom=document.getElementById("innerBottom"),extraheight=document.getElementById("createSpace"),ctx=canvas.getContext("2d"),flakeCount=1000,mX=-100,mY=-100,body=document.body,html=document.documentElement,screenheight=window.innerHeight,docheight=regio.scrollHeight,snowBorder=document.getElementById("snowBorder"),didScroll=false,yOffset=0,tStart=100,tEnd=docheight,cStart=[53,137,182],cEnd=[166,222,255],cDiff=[cEnd[0]-cStart[0],cEnd[1]-cStart[1],cEnd[1]-cStart[0]];canvas.width=window.innerWidth;canvas.height=window.innerHeight;regio.style.height=window.innerHeight+"px";regio.style.width=window.innerWidth+"px";innerTop.style.height=window.innerHeight+"px";innerBottom.style.height=window.innerHeight+"px";$(document).ready(function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1000/60)};window.requestAnimationFrame=a;setInterval(function(){if(didScroll){didScroll=false;move()}},10)});function snow(){ctx.clearRect(0,0,canvas.width,canvas.height);for(var d=0;d<flakeCount;d++){var e=flakes[d],k=mX,h=mY,l=150,b=e.x,j=e.y;var g=Math.sqrt((b-k)*(b-k)+(j-h)*(j-h)),o=b-k,m=j-h;if(g<l){var c=l/(g*g),a=(k-b)/g,n=(h-j)/g,f=c/2;e.velX-=f*a;e.velY-=f*n}else{e.velX*=0.98;if(e.velY<=e.speed){e.velY=e.speed}e.velX+=Math.cos(e.step+=0.05)*e.stepSize}ctx.fillStyle="rgba(255,255,255,"+e.opacity+")";e.y+=e.velY;e.x+=e.velX;if(e.y>=canvas.height||e.y<=0){reset(e)}if(e.x>=canvas.width||e.x<=0){reset(e)}ctx.beginPath();ctx.arc(e.x,e.y,e.size,0,Math.PI*2);ctx.fill()}requestAnimationFrame(snow)}function reset(a){a.x=Math.floor(Math.random()*canvas.width);a.y=0;a.size=(Math.random()*3)+2;a.speed=(Math.random()*1)+0.5;a.velY=a.speed;a.velX=0;a.opacity=(Math.random()*0.5)+0.3}function init(){for(var d=0;d<flakeCount;d++){var a=Math.floor(Math.random()*canvas.width),f=Math.floor(Math.random()*canvas.height),c=(Math.random()*3)+2,e=(Math.random()*1)+0.5,b=(Math.random()*0.5)+0.3;flakes.push({speed:e,velY:e,velX:0,x:a,y:f,size:c,stepSize:(Math.random())/30,step:0,angle:180,opacity:b})}snow()}init();function move(){yOffset=$("#regio").scrollTop();snowBorder.style.bottom=(yOffset/(docheight/100))-(snowBorder.clientHeight)+"px";if(!(yOffset<docheight-screenheight)){$("#snowBorder, #snowBorder > span.sociallinks").addClass("showFull")}else{$("#snowBorder, #snowBorder span.sociallinks").removeClass("showFull")}var b=($("#regio").scrollTop()-tStart)/(tEnd-tStart);b=Math.min(1,Math.max(0,b));var a=[Math.round(cStart[0]+cDiff[0]*b),Math.round(cStart[1]+cDiff[1]*b),Math.round(cStart[2]+cDiff[2]*b)];$("body").css("background-color","rgb("+a.join(",")+")")}$("#information a").click(function(a){a.preventDefault();$(this).parent().toggleClass("active")});$("#regio").scroll(function(){clearTimeout($.data(this,"scrollTimer"));didScroll=true;$("#keepOnScroll").removeClass("active");$.data(this,"scrollTimer",setTimeout(function(){if((yOffset<docheight-screenheight)&&(yOffset>screenheight)){$("#keepOnScroll").addClass("active")}else{$("#keepOnScroll").removeClass("active")}},2000))});regio.addEventListener("mousemove",function(a){mX=a.clientX,mY=a.clientY});